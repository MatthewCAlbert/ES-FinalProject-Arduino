#include "WebHTML.h"

String getHtml()
{
  return "<!DOCTYPE html><html lang=\"en\"><head> <meta charset=\"UTF-8\"> <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"> <title>ES VIM Simple Controller</title> <style>body,html{margin: 0; padding: 0; font-family: sans-serif;}#container{display: flex; justify-content: flex-start; text-align: center; flex-direction: column; min-height: 100vh; width: 100%;}.btn-container{margin-top: 20px;}.btn{font-size:1.5rem; display: block; cursor: pointer; margin: 10px auto;}p{margin: 0;}.text-red{color: red;}.text-green{color: green;}</style></head><body> <div id=\"container\"> <h1>ES VIM Simple Controller</h1> <div> <h2>Status</h2> <p>Connection: <b><span id=\"connectionStatus\"><span class=\'text-red\'>DISCONNECTED</span></span></b></p><p>Signal: Motor (<span id=\"motorRssi\"></span> dBm) | Sensor(<span id=\"sensorRssi\"></span> dBm)</p><p>Current Status: <b><span id=\"motorStatus\"></span></b></p><p>Mode: <b><span id=\"overrideStatus\"></span></b></p><p>Temperature: <b><span id=\"temperature\"></span>C</b></p><p>Humidity: <b><span id=\"humidity\"></span>%RH</b></p></div><div class=\"btn-container\"> <button class=\"btn\" onclick=\"setStatus(\'open\')\">OPEN</button> <button class=\"btn\" onclick=\"setStatus(\'close\')\">CLOSE</button> <button class=\"btn\" onclick=\"setStatus(\'auto\')\">AUTO</button> </div></div><script>function setStatus(x){var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function (){if (this.readyState==4 && this.status==200){alert(\'Command sent\');}}; xhttp.open(\"GET\", \"/motor/set/\"+x, true); xhttp.send();}function getNewStatus(){var xhttp=new XMLHttpRequest(); xhttp.onreadystatechange=function (){if (this.readyState==4 && this.status==200){let res=JSON.parse(this.responseText); document.getElementById(\"motorStatus\").innerHTML=res.status; document.getElementById(\"overrideStatus\").innerHTML=res.override ? \"Manual\" :\"Auto\"; document.getElementById(\"motorRssi\").innerHTML=res.motorRssi; document.getElementById(\"sensorRssi\").innerHTML=res.sensorRssi; document.getElementById(\"temperature\").innerHTML=res.sensor.temperature; document.getElementById(\"humidity\").innerHTML=res.sensor.humidity; document.getElementById(\"connectionStatus\").innerHTML=\"<span class=\'text-green\'>OK</span>\";}else if( this.status==500 ){document.getElementById(\"connectionStatus\").innerHTML=\"<span class=\'text-red\'>DISCONNECTED</span>\";}}; xhttp.open(\"GET\", \"/pinfo\", true); xhttp.send();}var ajaxCheck=setInterval(getNewStatus, 5000);</script></body></html>";
}